<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CRM系统-首页</title>
    <link type="text/css" rel="stylesheet" href="css/style.css" />

    <!-- Bootstrap Styles-->
    <link href="assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="assets/css/font-awesome.css" rel="stylesheet" />
    <!-- Morris Chart Styles-->
    <link href="assets/js/morris/morris-0.4.3.min.css" rel="stylesheet" />
    <!-- Custom Styles-->
    <link href="assets/css/custom-styles.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="assets/js/Lightweight-Chart/cssCharts.css">

    <style >
        .login{
            margin: 0 auto;
            width: 400px;
            height: 10px;
        }
        .shadow { background:#e8e8e8; position:relative; overflow:hidden; }
        .shadow .corner { position:absolute; display:inline-block; width:3px; height:3px; background:#fff; }
        .shadow .lb { left:0; bottom:0; }
        .shadow .rt { right:0; top:0; }
        .shadow .box { background:#fff; border:1px solid #bfbfbf; padding:5px; margin-right:3px; margin-bottom:3px; }
        .shadow .box .msg { text-align:center; padding:20px; }

        .wrap { width:960px; margin:0 auto; }
    </style>
    <script type="text/javascript" src="assets/js/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="scripts/function.js"></script>
    <script type="text/javascript" src="assets/js/moment.js"></script>
    <script type="text/javascript" src="assets/js/daterangepicker.js"></script>
    <script type="text/javascript">
        $(function(){
        	getCode();
           
        });
        function getCode(){ $.ajax({
            url:'random.action',
            success:function(data){
                console.log(data);
                $("#yzms").attr("value",data);
                drawPic();
            }
        })}
        function randomNum(min,max){
            return Math.floor( Math.random()*(max-min)+min);
        }
        function randomColor(min,max){
            var r = randomNum(min,max);
            var g = randomNum(min,max);
            var b = randomNum(min,max);
            return "rgb("+r+","+g+","+b+")";
        }
        /**绘制验证码图片**/
        function drawPic() {
            var canvas = document.getElementById("canvas");
            var width = canvas.width;
            var height = canvas.height;
            var ctx = canvas.getContext('2d');
            ctx.textBaseline = 'bottom';

            /**绘制背景色**/
            ctx.fillStyle = randomColor(180, 240); //颜色若太深可能导致看不清
            ctx.fillRect(0, 0, width, height);
            /**绘制文字**/

            
            var txt = $("#yzms").attr("value");
            ctx.fillStyle = randomColor(50, 160);  //随机生成字体颜色
            ctx.font = randomNum(20, 25) + 'px SimHei'; //随机生成字体大小
            var x = 20;
            var y = randomNum(25, 35);
            var deg;
            if (y<=30) {
            	 deg = randomNum(-5, 25);
			}
            if (y>30) {
            	 deg = randomNum(-25, 1);
			}
            
            //修改坐标原点和旋转角度
            ctx.translate(x, y);
            ctx.rotate(deg * Math.PI / 180);
            ctx.fillText(txt, -3, -3);
            //恢复坐标原点和旋转角度
            ctx.rotate(-deg * Math.PI / 180);
            ctx.translate(-x, -y);
            /*    } */
            /* /**绘制干扰线**/
            for (var i = 0; i < 8; i++) {
                ctx.strokeStyle = randomColor(40, 180);
                ctx.beginPath();
                ctx.moveTo(randomNum(0, width), randomNum(0, height));
                ctx.lineTo(randomNum(0, width), randomNum(0, height));
                ctx.stroke();
            }
        }
    function login(){
    	var verycode=$("#veryCode").val();
    	var yzms=$("#yzms").val();
	if (verycode.toLowerCase()==yzms.toLowerCase()) {
		     
			$.ajax({
				
				url:'PIClogin.action',
				type:'post',
				data:{
					username:$("#userName").val(),
					password:$("#passWord").val()
					
				},
				success:function(data){
					//alert(data);
					location.href="clue.html";
				}
				
			})
		
	}else{
        alert("error");
        $("#codediv").html("验证码错误");
        getCode();
		
	}
    }
    </script>
        </head>

<body>
<div id="wrapper">
    <nav class="navbar navbar-default top-navbar" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html"><strong>CRM系统</strong></a>

            <div id="sideNav" href=""><i class="fa fa-caret-right"></i></div>
        </div>

        <ul class="nav navbar-top-links navbar-right">

            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <i class="fa fa-bell fa-fw"></i>通知&nbsp; <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-alerts">
                    <li>
                        <a class="text-center" href="#">
                            <div>
                                <i class="fa fa-tasks fa-fw"></i> 共有4条新消息

                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-comment fa-fw"></i> 新消息
                                <span class="pull-right text-muted small">5 min 前</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-comment fa-fw"></i> 新消息
                                <span class="pull-right text-muted small">6 min 前</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-comment fa-fw"></i> 新消息
                                <span class="pull-right text-muted small">7 min 前</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-comment fa-fw"></i> 新消息
                                <span class="pull-right text-muted small">8 min 前</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="#">
                            <strong>查看所有消息</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-alerts -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <i class="fa fa-user fa-fw"></i>
                    张三
                    <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-user">
                    <li><a href="#" data-toggle="modal" data-target="#information"><i class="fa fa-user fa-fw"></i> 个人信息</a>
                    </li>
                    <li class="divider"></li>
                    <li><a href="#"><i class="fa fa-gear fa-fw"></i> 个性化首页</a>
                    </li>
                    <li class="divider"></li>
                    <li><a href="#" data-toggle="modal" data-target="#out"><i class="fa fa-sign-out fa-fw"></i> 安全退出</a>
                    </li>
                </ul>
                <!-- /.dropdown-user -->
            </li>
            <!-- /.dropdown -->
        </ul>
    </nav>
    <!--个人信息-->
    <div class="modal fade" id="information" tabindex="-1" role="dialog" aria-labelledby="informationLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="informationLabel">
                        编辑信息
                    </h4>
                </div>
                <div class="modal-body text-center">

                    <form class="bs-example bs-example-form" role="form">
                        <div class="input-group">
                            <span class="input-group-addon">姓名：</span>
                            <input type="text" class="form-control" placeholder="张三">
                        </div>
                        <br>
                        <div class="input-group">
                            <span class="input-group-addon">邮箱：</span>
                            <input type="text" class="form-control" placeholder="123456879@qq.com">
                        </div>
                        <br>
                        <div class="input-group">
                            <span class="input-group-addon">部门：</span>
                            <input type="text" class="form-control" placeholder="销售部门" disabled="disabled">
                        </div>
                        <br>
                        <div class="input-group">
                            <span class="input-group-addon">职务：</span>
                            <input type="text" class="form-control" placeholder="部门经理">
                        </div>
                        <br>
                        <div class="input-group">
                            <span class="input-group-addon">性别：</span>
                            <input type="radio" class="" value="0" name="sex">男
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <input type="radio" class="" value="1" name="sex">女
                        </div>
                        <br>
                        <div class="input-group">
                            <span class="input-group-addon">头像：</span>
                            <input type="file" class="form-control">
                        </div>
                    </form>

                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#save">
                        保存
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!--安全退出-->
    <div class="modal fade" id="out" tabindex="-1" role="dialog" aria-labelledby="outLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="outLabel">
                        确定要退出吗？
                    </h4>
                </div>
                <div class="modal-body">
                    &nbsp;
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                    </button>
                    <button type="button" class="btn btn-primary">
                        安全退出
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!--/. NAV TOP  -->
    <nav class="navbar-default navbar-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav" id="main-menu">

                <li>
                    <a class="active-menu" href="index.html"><i class="fa fa-home"></i> 首页</a>
                </li>
                <li>
                    <a href="#"><i class="fa fa-sitemap"></i> 销售管理<span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a href="clue.html">线索</a>
                        </li>
                        <li>
                            <a href="customer.html">客户</a>
                        </li>
                        <li>
                            <a href="public-customers.html">客户公海</a>
                        </li>
                        <li>
                            <a href="contacts.html">联系人</a>
                        </li>
                        <li>
                            <a href="opportunity.html">机会</a>
                        </li>
                        <li>
                            <a href="contract.html">合同</a>
                        </li>
                        <li>
                            <a href="payment.html">回款</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="fa fa-file"></i> 销售支持<span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a href="#">产品</a>
                        </li>
                        <li>
                            <a href="#">工作报告</a>
                        </li>
                        <li>
                            <a href="#">知识库</a>
                        </li>
                        <li>
                            <a href="#">短信群发</a>
                        </li>
                        <li>
                            <a href="#">费用报销</a>
                        </li>
                        <li>
                            <a href="#">跟进记录</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="fa fa-bar-chart-o"></i> 统计分析</a>
                </li>
            </ul>

        </div>

    </nav>
    <!-- /. NAV SIDE  -->

    <div id="page-wrapper">

        <div class="login"></div>
        <div id="register" class="wrap">
            <div class="shadow">
                <em class="corner lb"></em>
                <em class="corner rt"></em>
                <div class="box">
                    <h1 style="background: #F09B22;font-style: oblique " >CRM系统登陆</h1>
                    <form id="loginForm">
                        <table>
                            <tr>
                                <td class="field">用户名：</td>
                                <td><input class="text" type="text" id="userName" name="userName" onfocus="FocusItem(this)" onblur="CheckItem(this);" /><span></span></td>
                            </tr>
                            <tr>
                                <td class="field">登录密码：</td>
                                <td><input class="text" type="password" id="passWord" name="passWord" onfocus="FocusItem(this)" onblur="CheckItem(this);" /><span></span></td>
                            </tr>
                            <tr>
                                <td class="field">  验证码：</td>
                                <td><input class="text"  id="veryCode" type="text"/><canvas id="canvas" width="70" height="34" onclick="getCode()"></canvas><a href="javascript:getCode();" id="img"  style="line-height: 34px;text-indent: 10px;  " >换一张</a><div id="codediv" style="height: 20px;width: 100px;"
                                ></div><input type="text"  id="yzms" name="yzms" readonly = "readonly" style="display: none"> </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td><label class="ui-green"><input type="button" id="submit" name="submit" value="立即登录" onclick="login()" />

                                </label>
                                <a href="register.html">注册</a></td>
                            </tr>
                        </table>
				<span id="span">
  </span>
                    </form>
                </div>
            </div>
            <div class="clear"></div>
        </div>



    </div>
    <!-- /. PAGE WRAPPER  -->
</div>
<!-- /. WRAPPER  -->
<!-- JS Scripts-->
<!-- jQuery Js -->
<script src="assets/js/jquery-1.10.2.js"></script>
<!-- Bootstrap Js -->
<script src="assets/js/bootstrap.min.js"></script>

<!-- Metis Menu Js -->
<script src="assets/js/jquery.metisMenu.js"></script>
<!-- Morris Chart Js -->
<script src="assets/js/morris/raphael-2.1.0.min.js"></script>
<script src="assets/js/morris/morris.js"></script>


<script src="assets/js/easypiechart.js"></script>
<script src="assets/js/easypiechart-data.js"></script>

<script src="assets/js/Lightweight-Chart/jquery.chart.js"></script>

<!-- Custom Js -->
<script src="assets/js/custom-scripts.js"></script>

<script>

</script>

</body>

</html>